{"version":3,"sources":["../../src/database/ghost.js"],"names":["module","exports","knex","h","createTableIfNotExists","table","increments","string","unique","text","timestamp","defaultTo","fn","now","then","integer","references"],"mappings":";;AAIA;;;;;;AAEAA,OAAOC,OAAP,GAAiBC,QAAQ;AACvB,QAAMC,IAAI,uBAAQD,IAAR,CAAV;AACA,SAAOC,EACJC,sBADI,CACmB,eADnB,EACoCC,SAAS;AAChDA,UAAMC,UAAN,CAAiB,IAAjB;AACAD,UAAME,MAAN,CAAa,QAAb;AACAF,UAAME,MAAN,CAAa,MAAb;AACAF,UAAMG,MAAN,CAAa,CAAC,QAAD,EAAW,MAAX,CAAb;AACAH,UAAMI,IAAN,CAAW,SAAX;AACAJ,UAAMK,SAAN,CAAgB,aAAhB,EAA+BC,SAA/B,CAAyCT,KAAKU,EAAL,CAAQC,GAAR,EAAzC;AACD,GARI,EASJC,IATI,CASC,MACJX,EAAEC,sBAAF,CAAyB,iBAAzB,EAA4CC,SAAS;AACnDA,UAAMC,UAAN,CAAiB,IAAjB;AACAD,UAAMU,OAAN,CAAc,YAAd,EAA4BC,UAA5B,CAAuC,kBAAvC;AACAX,UAAME,MAAN,CAAa,UAAb;AACAF,UAAMK,SAAN,CAAgB,YAAhB,EAA8BC,SAA9B,CAAwCT,KAAKU,EAAL,CAAQC,GAAR,EAAxC;AACAR,UAAME,MAAN,CAAa,YAAb;AACD,GAND,CAVG,CAAP;AAkBD,CApBD,C,CANA","file":"ghost.js","sourcesContent":["/*\n  Tables storing ghost content and its revisions\n*/\n\nimport helpers from './helpers'\n\nmodule.exports = knex => {\n  const h = helpers(knex)\n  return h\n    .createTableIfNotExists('ghost_content', table => {\n      table.increments('id')\n      table.string('folder')\n      table.string('file')\n      table.unique(['folder', 'file'])\n      table.text('content')\n      table.timestamp('modified_on').defaultTo(knex.fn.now())\n    })\n    .then(() =>\n      h.createTableIfNotExists('ghost_revisions', table => {\n        table.increments('id')\n        table.integer('content_id').references('ghost_content.id')\n        table.string('revision')\n        table.timestamp('created_on').defaultTo(knex.fn.now())\n        table.string('created_by')\n      })\n    )\n}\n"]}