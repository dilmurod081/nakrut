{"version":3,"sources":["../../src/server/anonymous.js"],"names":["module","exports","bp","app","get","req","res","stats","track","json","security","getAuthenticationInfo","post","result","refreshToken","headers","authorization","success","send","token","status","reason","login","body","user","password","ip"],"mappings":";;;;AAAAA,OAAOC,OAAP,GAAiB,CAACC,EAAD,EAAKC,GAAL,KAAa;AAC5BA,MAAIC,GAAJ,CAAQ,gBAAR;AAAA,iCAA0B,WAAOC,GAAP,EAAYC,GAAZ,EAAoB;AAC5CJ,SAAGK,KAAH,CAASC,KAAT,CAAe,KAAf,EAAsB,MAAtB,EAA8B,MAA9B;AACAF,UAAIG,IAAJ,CAASP,GAAGQ,QAAH,CAAYC,qBAAZ,EAAT;AACD,KAHD;;AAAA;AAAA;AAAA;AAAA;;AAKAR,MAAIS,IAAJ,CAAS,yBAAT;AAAA,kCAAoC,WAAOP,GAAP,EAAYC,GAAZ,EAAoB;AACtDJ,SAAGK,KAAH,CAASC,KAAT,CAAe,KAAf,EAAsB,MAAtB,EAA8B,eAA9B;AACA,YAAMK,SAAS,MAAMX,GAAGQ,QAAH,CAAYI,YAAZ,CAAyBT,IAAIU,OAAJ,CAAYC,aAArC,CAArB;AACA,UAAIH,OAAOI,OAAX,EAAoB;AAClBX,YAAIY,IAAJ,CAASL,OAAOM,KAAhB;AACD,OAFD,MAEO;AACLb,YAAIc,MAAJ,CAAW,GAAX,EAAgBF,IAAhB,CAAqBL,OAAOQ,MAA5B;AACD;AACF,KARD;;AAAA;AAAA;AAAA;AAAA;;AAUAlB,MAAIS,IAAJ,CAAS,YAAT;AAAA,kCAAuB,WAAOP,GAAP,EAAYC,GAAZ,EAAoB;AACzCJ,SAAGK,KAAH,CAASC,KAAT,CAAe,KAAf,EAAsB,MAAtB,EAA8B,OAA9B;AACA,YAAMK,SAAS,MAAMX,GAAGQ,QAAH,CAAYY,KAAZ,CAAkBjB,IAAIkB,IAAJ,CAASC,IAA3B,EAAiCnB,IAAIkB,IAAJ,CAASE,QAA1C,EAAoDpB,IAAIqB,EAAxD,CAArB;AACApB,UAAIY,IAAJ,CAASL,MAAT;AACD,KAJD;;AAAA;AAAA;AAAA;AAAA;AAKD,CArBD","file":"anonymous.js","sourcesContent":["module.exports = (bp, app) => {\n  app.get('/api/auth/info', async (req, res) => {\n    bp.stats.track('api', 'auth', 'info')\n    res.json(bp.security.getAuthenticationInfo())\n  })\n\n  app.post('/api/auth/refresh_token', async (req, res) => {\n    bp.stats.track('api', 'auth', 'refresh_token')\n    const result = await bp.security.refreshToken(req.headers.authorization)\n    if (result.success) {\n      res.send(result.token)\n    } else {\n      res.status(400).send(result.reason)\n    }\n  })\n\n  app.post('/api/login', async (req, res) => {\n    bp.stats.track('api', 'auth', 'login')\n    const result = await bp.security.login(req.body.user, req.body.password, req.ip)\n    res.send(result)\n  })\n}\n"]}